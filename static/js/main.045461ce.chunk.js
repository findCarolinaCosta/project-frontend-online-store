(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{22:function(e,t,a){e.exports=a(35)},27:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(27),a(1)),l=a(2),s=a(4),u=a(3),d=a(12),p=a(6),m=a(5),h=a.n(m),f=a(8);function v(){return b.apply(this,arguments)}function b(){return(b=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(h.a.mark((function e(t,a){var n,r,c,i,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=6;break}return e.next=3,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a));case 3:return n=e.sent,r=n.json(),e.abrupt("return",r);case 6:if(!a){e.next=12;break}return e.next=9,fetch("https://api.mercadolibre.com/sites/MLB/search?q=".concat(a));case 9:return c=e.sent,i=c.json(),e.abrupt("return",i);case 12:return e.next=14,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t));case 14:return o=e.sent,l=o.json(),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={categories:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,this.setCategoriesInState(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCategoriesInState",value:function(e){this.setState({categories:e})}},{key:"render",value:function(){var e=this.state.categories,t=this.props.categoryChange;return r.a.createElement("div",{className:"categories"},r.a.createElement("span",null,"Categorias:"),e.map((function(e){return r.a.createElement("div",{key:e.id,className:"categories-item"},r.a.createElement("label",{htmlFor:e.id,"data-testid":"category"},r.a.createElement("input",{type:"radio",name:"category",id:e.id,value:e.id,onChange:t}),"\xa0",e.name))})))}}]),a}(r.a.Component);function O(e,t){var a=localStorage.getItem("CartIds"),n=[];a&&(n=JSON.parse(a)),n.push({productId:e,categoryId:t});var r=JSON.stringify(n);localStorage.setItem("CartIds",r)}function j(){var e=localStorage.getItem("CartIds");return e?JSON.parse(e):[]}var C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).sendToCart=function(){var t=e.props;O(t.productId,t.categoryId)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.thumbnail,a=e.productId,n=e.categoryId,c=e.title,i=e.price,o=e.shipping;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{to:"/detailedproductview/".concat(n,"/").concat(a),"data-testid":"product-detail-link"},o&&r.a.createElement("span",{"data-testid":"free-shipping"},"Frete Gr\xe1tis!"),r.a.createElement("img",{src:t,alt:a}),r.a.createElement("span",null,c),r.a.createElement("span",null,"R$ ".concat(i))),r.a.createElement("button",{type:"button",onClick:this.sendToCart,"data-testid":"product-add-to-cart"},"Eu quero!"))}}]),a}(r.a.Component),k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).categoryChange=function(t){var a=t.target;e.setState({category:a.value},e.handleSearch)},e.onInputChange=function(t){var a=t.target;e.setState({inputSearch:a.value})},e.handleSearch=Object(f.a)(h.a.mark((function t(){var a,n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.inputSearch,r=a.category,t.next=3,g(r,n);case 3:c=t.sent,e.setState({productsList:c,showResults:!0});case 5:case"end":return t.stop()}}),t)}))),e.handleProducts=function(){var t=e.state.productsList.results;return 0===t.length?r.a.createElement("span",null,"Nenhum produto foi encontrado"):t.map((function(e){return r.a.createElement("div",{key:e.id,"data-testid":"product"},r.a.createElement(C,{thumbnail:e.thumbnail,productId:e.id,categoryId:e.category_id,title:e.title,price:e.price,shipping:e.shipping.free_shipping}))}))},e.state={productsList:[],inputSearch:"",showResults:!1,category:""},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputSearch,n=t.showResults;return r.a.createElement("div",{className:"home-layout"},r.a.createElement(y,{categoryChange:this.categoryChange}),r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex jc-end"},r.a.createElement(d.b,{className:"cart","data-testid":"shopping-cart-button",to:"/shoppingcart"},"Carrinho de compras",r.a.createElement("span",{role:"img","aria-label":"Carrinho de compras"},"\ud83d\uded2"))),r.a.createElement("p",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement("form",{className:"d-flex"},r.a.createElement("input",{className:"form-control",type:"text","data-testid":"query-input",value:a,onChange:this.onInputChange}),r.a.createElement("button",{className:"search-button",type:"submit","data-testid":"query-button",onClick:function(t){t.preventDefault(),e.handleSearch()}},r.a.createElement("span",{role:"img","aria-label":"Pesquisar"},"\ud83d\udd0e"))),n&&this.handleProducts()))}}]),a}(r.a.Component),S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).totalAmount=function(){var e=n.state.quantityOfProduct,t=n.props,a=t.price,r=t.id,c=t.changeTotalPrice,i=a*Number(e);n.setState({totalValue:i},(function(){c(r,i)}))},n.decreaseCartQuantity=function(){n.state.quantityOfProduct<1&&n.setState({quantityOfProduct:1}),n.setState((function(e){return{quantityOfProduct:e.quantityOfProduct-1}}),n.totalAmount)},n.increaseCartQuantity=function(){var e=n.props.maxQuantity;n.state.quantityOfProduct+1<=e&&n.setState((function(e){return{quantityOfProduct:e.quantityOfProduct+1}}),n.totalAmount)},n.emptyCart=function(){!function(e){var t=localStorage.getItem("CartIds"),a=JSON.parse(t).filter((function(t){return t.productId!==e}));localStorage.setItem("CartIds",JSON.stringify(a))}(n.props.id),window.location.reload()},n.state={totalValue:0,quantityOfProduct:e.quantityOfThis},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.totalAmount()}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.price,n=this.state,c=n.quantityOfProduct,i=n.totalValue;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("span",{"data-testid":"shopping-cart-product-name"},t),r.a.createElement("span",null,a)),r.a.createElement("div",null,r.a.createElement("button",{"data-testid":"product-decrease-quantity",type:"button",onClick:this.decreaseCartQuantity},"-"),r.a.createElement("span",{"data-testid":"shopping-cart-product-quantity"},c),r.a.createElement("button",{"data-testid":"product-increase-quantity",type:"button",onClick:this.increaseCartQuantity},"+"),r.a.createElement("button",{type:"button",onClick:this.emptyCart},"X"),r.a.createElement("div",null,i)))}}]),a}(n.Component),I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleCloudIds=function(){e.setState({productIds:j(),showResults:!0},e.handleItemsDetails)},e.sumTotalPrice=function(){var t=e.state.productsToSum.reduce((function(e,t){return e+t.value}),0);e.setState({finalPrice:t})},e.changeTotalPrice=function(t,a){var n=e.state.productsToSum.filter((function(e){return e.id!==t}));n.push({id:t,value:a}),e.setState({productsToSum:n},e.sumTotalPrice)},e.handleItemsDetails=function(){var t=e.state,a=t.productIds,n=t.productsDetails,r=t.productsToSum;a.forEach(function(){var t=Object(f.a)(h.a.mark((function t(a){var c,i,o,l,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.productId,i=a.categoryId,t.next=3,g(i);case 3:o=t.sent,l=o.results.find((function(e){return e.id===c})),s={id:l.id,value:l.price},r.push(s),n.push(l),l.quantityOfThis=1,e.setState({productsDetails:n,productsToSum:r},e.sumTotalPrice);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.handleCartList=function(){var t=e.state,a=t.productIds,n=t.productsDetails,c=t.finalPrice;return 0===a.length?r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,n.length),n.map((function(t){var a=t.id,n=t.title,c=t.price,i=t.quantityOfThis;return r.a.createElement(S,{key:a,id:a,title:n,price:c,quantityOfThis:i,maxQuantity:t.available_quantity,changeTotalPrice:e.changeTotalPrice})})),r.a.createElement("p",null,"Valor total da compra: "),c),r.a.createElement(d.b,{to:"/shoppingcard/checkoutpage/"},r.a.createElement("button",{"data-testid":"checkout-products",type:"button"},"Finalizar compra")))},e.state={productIds:[],productsDetails:[],productsToSum:[],showResults:!1,finalPrice:0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.handleCloudIds()}},{key:"render",value:function(){var e=this.state.showResults;return r.a.createElement("div",null,e&&this.handleCartList())}}]),a}(n.Component),x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){for(var e=this.props,t=e.maxRating,a=e.defaultValue,n=e.setRating,c=[],i=0;i<t;i+=1)c.push(i+1);return r.a.createElement("div",null,c.map((function(e){return r.a.createElement("label",{key:e,htmlFor:e,className:"rating-item"},r.a.createElement("input",{id:e,className:"rating-radio",type:"radio",name:"rating",onChange:function(e){n(parseInt(e.target.value,10))},checked:a===e,value:e}),"\xa0",e)})))}}]),a}(r.a.Component),w=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.match,t=(JSON.parse(localStorage.getItem("savedAssessments"))||[]).filter((function(t){return t.id===e.params.id}));return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement("div",{key:t,className:"saved-assessments"},r.a.createElement("div",null,r.a.createElement("span",null,"E-mail: "),r.a.createElement("span",null,e.email)),r.a.createElement("div",null,r.a.createElement("span",null,"Nota: "),r.a.createElement("span",null,e.rating)),r.a.createElement("div",null,r.a.createElement("span",null,"Avalia\xe7\xe3o: "),r.a.createElement("span",null,e.evaluation)))})))}}]),a}(r.a.Component),N=Object(p.f)(w),P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={email:"",rating:5,evaluation:""},e}return Object(l.a)(a,[{key:"saveEvaluation",value:function(){var e=this.state,t=e.email,a=e.rating,n=e.evaluation,r=this.props.match,c=JSON.parse(localStorage.getItem("savedAssessments"))||[];c.unshift({id:r.params.id,email:t,rating:a,evaluation:n}),localStorage.setItem("savedAssessments",JSON.stringify(c)),this.setState({email:"",rating:5,evaluation:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.rating,c=t.evaluation;return r.a.createElement("div",null,r.a.createElement("h3",null,"Avalia\xe7\xf5es"),r.a.createElement("br",null),r.a.createElement("form",{className:"reating-border"},r.a.createElement("input",{onChange:function(t){e.setState({email:t.target.value})},value:a,className:"form-control ",type:"email",placeholder:"Digite seu e-mail"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x,{maxRating:5,defaultValue:n,setRating:function(t){e.setState({rating:t})}}),r.a.createElement("br",null),r.a.createElement("textarea",{onChange:function(t){e.setState({evaluation:t.target.value})},value:c,className:"form-textarea","data-testid":"product-detail-evaluation"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex jc-end"},r.a.createElement("button",{type:"submit",className:"btn",onClick:function(t){t.preventDefault(),e.saveEvaluation()}},"Enviar avalia\xe7\xe3o"))),r.a.createElement(N,null))}}]),a}(r.a.Component),q=Object(p.f)(P),T=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleAPI=function(){var t=Object(f.a)(h.a.mark((function t(a,n){var r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(a);case 2:r=t.sent,c=r.results.find((function(e){return e.id===n})),e.setState({title:c.title,thumbnail:c.thumbnail,price:c.price,availableQuantity:c.available_quantity,condition:c.condition,shipping:c.shipping.free_shipping,categoryId:a,id:n});case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.sendToCart=function(){var t=e.state,a=t.categoryId;O(t.id,a)},e.state={title:"",thumbnail:"",price:0,availableQuantity:0,condition:"",categoryId:"",id:"",shipping:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.id,a=e.categoryId;this.handleAPI(a,t)}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.thumbnail,n=e.price,c=e.availableQuantity,i=e.condition,o=e.shipping;return r.a.createElement("div",{className:"p-10"},r.a.createElement("h3",{"data-testid":"product-detail-name"},t),r.a.createElement("div",null,r.a.createElement(d.b,{className:"cart","data-testid":"shopping-cart-button",to:"/shoppingcart"},"Carrinho de compras",r.a.createElement("span",{role:"img","aria-label":"Carrinho de compras"},"\ud83d\uded2")),o&&r.a.createElement("span",{"data-testid":"free-shipping"},"Frete Gr\xe1tis!"),r.a.createElement("img",{src:a,alt:t}),r.a.createElement("h3",null,"R$ ".concat(n)),r.a.createElement("h4",null,"Especifica\xe7\xf5es: "),r.a.createElement("p",null,"Quantidade dispon\xedvel: ".concat(c),"\xa0|\xa0","Condi\xe7\xe3o do produto: ".concat(i)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",onClick:this.sendToCart},"Adicionar Ao Carrinho"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(q,null)))}}]),a}(n.Component),A=(a(34),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).getId=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:t.sent.filter(function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(a.categoryId);case 2:n=t.sent,r=n.results.find((function(e){return e.id===a.productId})),e.setState({title:r.title,thumbnail:r.thumbnail,price:r.price,id:a.productId});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),e.state={title:"",thumbnail:"",price:0,id:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getId()}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.thumbnail,n=e.price,c=e.id;return r.a.createElement("form",{className:"container"},r.a.createElement("fieldset",null,r.a.createElement("h4",null,"Revise seus Produtos"),r.a.createElement("section",{className:"review-products"},r.a.createElement("img",{src:a,alt:c}),r.a.createElement("span",null,t),r.a.createElement("span",null,"R$ ".concat(n)))),r.a.createElement("fieldset",{className:"fieldset-form"},r.a.createElement("section",{className:"form-info"},r.a.createElement("label",{htmlFor:"fullname"},"Name:",r.a.createElement("input",{id:"fullname",type:"text","data-testid":"checkout-fullname"})),r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{id:"email",type:"email","data-testid":"checkout-email"})),r.a.createElement("label",{htmlFor:"cpf"},"CPF:",r.a.createElement("input",{id:"cpf",type:"text","data-testid":"checkout-cpf"})),r.a.createElement("label",{htmlFor:"phone"},"Phone number:",r.a.createElement("input",{id:"phone",type:"text","data-testid":"checkout-phone"})),r.a.createElement("label",{htmlFor:"cep"},"CEP:",r.a.createElement("input",{id:"cep",type:"text","data-testid":"checkout-cep"})),r.a.createElement("label",{htmlFor:"address"},"Address:",r.a.createElement("input",{id:"address",type:"text","data-testid":"checkout-address"}))),r.a.createElement("button",{type:"submit"},"Finalizar")))}}]),a}(n.Component)),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{basename:"/project-frontend-online-store"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/detailedproductview/:categoryId/:id",component:T}),r.a.createElement(p.a,{exact:!0,path:"/shoppingcart",component:I}),r.a.createElement(p.a,{exact:!0,path:"/",component:k}),r.a.createElement(p.a,{exact:!0,path:"/shoppingcard/checkoutpage/",component:A})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.045461ce.chunk.js.map